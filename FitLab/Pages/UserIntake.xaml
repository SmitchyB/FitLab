<Page x:Class="FitLab.Pages.UserIntake"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="UserIntake">

    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
        <StackPanel x:Name="StepContainer" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20">

            <!-- Logo -->
            <Image Source="/Assets/Images/LogoIdea2.png" Height="80" Margin="0,0,0,20" Stretch="Uniform"/>

            <!-- Step 1: First Name -->
            <StackPanel x:Name="StepFirstName" Visibility="Visible">
                <TextBlock Text="What is your first name?" FontSize="20" Margin="0,0,0,10" TextAlignment="Center" Foreground="#9a42ff"/>
                <TextBox x:Name="TxtFirstName" Width="200" HorizontalAlignment="Center" Foreground="#9a42ff"/>
                <Button Content="Next" Width="100" Margin="0,10,0,0" HorizontalAlignment="Center" Click="NextFirstName"/>
            </StackPanel>

            <!-- Step 2: Gender -->
            <StackPanel x:Name="StepGender" Visibility="Collapsed">
                <TextBlock Text="Select your gender:" FontSize="20" Margin="0,0,0,10" TextAlignment="Center" Foreground="#9a42ff"/>
                <ComboBox x:Name="CmbGender" Width="200" HorizontalAlignment="Center" SelectionChanged="CmbGender_SelectionChanged">
                    <ComboBoxItem Content="Male"/>
                    <ComboBoxItem Content="Female"/>
                    <ComboBoxItem Content="Trans-Feminine"/>
                    <ComboBoxItem Content="Trans-Masculine"/>
                </ComboBox>
                <CheckBox x:Name="ChkOnHormones" Content="Currently on Hormone Therapy" Visibility="Collapsed" HorizontalAlignment="Center" Margin="0,10,0,0" Foreground="#9a42ff"/>
                <Button Content="Next" Width="100" Margin="0,10,0,0" HorizontalAlignment="Center" Click="NextGender"/>
            </StackPanel>

            <!-- Step 3: DOB -->
            <StackPanel x:Name="StepDOB" Visibility="Collapsed">
                <TextBlock Text="Enter your date of birth:" FontSize="20" Margin="0,0,0,10" TextAlignment="Center" Foreground="#9a42ff"/>
                <DatePicker x:Name="DatePickerDOB" HorizontalAlignment="Center"/>
                <Button Content="Next" Width="100" Margin="0,10,0,0" HorizontalAlignment="Center" Click="NextDOB"/>
            </StackPanel>

            <!-- Step 4: Height -->
            <StackPanel x:Name="StepHeight" Visibility="Collapsed">
                <TextBlock Text="Enter your height:" FontSize="20" Margin="0,0,0,10" TextAlignment="Center" Foreground="#9a42ff"/>

                <!-- Conditional instructions -->
                <TextBlock x:Name="TxtCmInstruction" Text="Enter centimeters (e.g., 170)" 
               FontSize="12" Foreground="#9a42ff" Visibility="Collapsed" TextAlignment="Center" Margin="0,0,0,10"/>
                <TextBlock x:Name="TxtInchesInstruction" Text="Enter inches (e.g., 65)" 
               FontSize="12" Foreground="#9a42ff" Visibility="Collapsed" TextAlignment="Center" Margin="0,0,0,10"/>
                <TextBlock x:Name="TxtFeetInchesInstruction" Text="Enter feet and inches (e.g., 5 and 10)" 
               FontSize="12" Foreground="#9a42ff" Visibility="Collapsed" TextAlignment="Center" Margin="0,0,0,10"/>

                <ComboBox x:Name="CmbHeightUnit" Width="200" Margin="0,0,0,10" HorizontalAlignment="Center" SelectionChanged="CmbHeightUnit_SelectionChanged">
                    <ComboBoxItem Content="Centimeters"/>
                    <ComboBoxItem Content="Inches"/>
                    <ComboBoxItem Content="Feet/Inches"/>
                </ComboBox>

                <!-- For Feet/Inches, labels -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <StackPanel x:Name="PanelFeetLabel" Visibility="Collapsed" Orientation="Horizontal" Margin="0,0,5,0">
                        <TextBlock Text="Feet:" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="#9a42ff"/>
                        <TextBox x:Name="TxtHeightPrimary" Width="50" Foreground="#9a42ff"/>
                    </StackPanel>
                    <StackPanel x:Name="PanelInchesLabel" Visibility="Collapsed" Orientation="Horizontal">
                        <TextBlock Text="Inches:" VerticalAlignment="Center" Margin="5,0,5,0" Foreground="#9a42ff"/>
                        <TextBox x:Name="TxtHeightSecondary" Width="50" Foreground="#9a42ff"/>
                    </StackPanel>
                </StackPanel>

                <!-- For Centimeters/Inches, single input -->
                <StackPanel x:Name="PanelSingleInput" Visibility="Collapsed" HorizontalAlignment="Center">
                    <TextBox x:Name="TxtHeightSingle" Width="200" Foreground="#9a42ff"/>
                </StackPanel>
                <Button Content="Next" Width="100" Margin="0,10,0,0" HorizontalAlignment="Center" Click="NextHeight"/>
            </StackPanel>

            <!-- Step 5: Weight -->
            <StackPanel x:Name="StepWeight" Visibility="Collapsed">
                <TextBlock Text="Enter your starting weight:" FontSize="20" Margin="0,0,0,10" TextAlignment="Center" Foreground="#9a42ff"/>
                <TextBlock Text="Format: enter a number (e.g., 150 or 68)" FontSize="12" Margin="0,0,0,10" Foreground="#9a42ff"/>
                <ComboBox x:Name="CmbWeightUnit" Width="200" Margin="0,0,0,10" HorizontalAlignment="Center">
                    <ComboBoxItem Content="Pounds"/>
                    <ComboBoxItem Content="Kilograms"/>
                </ComboBox>
                <TextBox x:Name="TxtWeight" Width="200" HorizontalAlignment="Center" Foreground="#9a42ff"/>
                <Button Content="Next" Width="100" Margin="0,10,0,0" HorizontalAlignment="Center" Click="NextWeight"/>
            </StackPanel>
            <!-- Step 6: Body Measurements -->
            <StackPanel x:Name="StepBodyMeasurements" Visibility="Collapsed" Margin="0,20,0,0">
                <TextBlock Text="Weekly Body Measurements (Week 0)" FontWeight="Bold" FontSize="16" Foreground="#9a42ff" Margin="0,0,0,10" />
                <ComboBox x:Name="CmbMeasurementUnit" SelectedIndex="0" Margin="0,0,0,10">
                    <ComboBoxItem Content="Inches"/>
                    <ComboBoxItem Content="Centimeters"/>
                </ComboBox>
                <!-- Advanced Toggle -->
                <CheckBox x:Name="ChkAdvancedMeasurements" Content="Advanced Measurement Tracking" Foreground="#9a42ff" Margin="0,0,0,10"
              Checked="ChkAdvancedMeasurements_Checked" Unchecked="ChkAdvancedMeasurements_Unchecked"/>
                
                <!-- Basic Inputs -->
                <StackPanel>
                    <TextBlock Text="Chest - Measure around the fullest part of your chest." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtChest" Margin="0,0,0,5" />

                    <TextBlock Text="Waist - Measure at the narrowest part of your torso, just above your belly button." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtWaist" Margin="0,0,0,5" />

                    <TextBlock Text="Hips - Measure at the widest part of your buttocks." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtHips" Margin="0,0,0,5" />
                </StackPanel>

                <!-- Advanced Inputs -->
                <StackPanel x:Name="PanelAdvancedMeasurements" Visibility="Collapsed" Margin="0,10,0,0">
                    <TextBlock Text="Neck - Measure at the base of the neck." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtNeck" Margin="0,0,0,5" />

                    <TextBlock Text="Shoulders - Measure around the broadest part of your shoulders." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtShoulders" Margin="0,0,0,5" />

                    <TextBlock Text="Upper Arm - Measure around the largest part of your upper arm (biceps/triceps)." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtUpperArm" Margin="0,0,0,5" />

                    <TextBlock Text="Forearm - Measure around the thickest part of your forearm." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtForearm" Margin="0,0,0,5" />

                    <TextBlock Text="Wrists - Measure just above the wrist bone." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtWrists" Margin="0,0,0,5" />

                    <TextBlock Text="Thighs - Measure around the widest part of your upper leg." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtThighs" Margin="0,0,0,5" />

                    <TextBlock Text="Calves - Measure at the widest point of your calf." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtCalves" Margin="0,0,0,5" />

                    <TextBlock Text="Ankle - Measure above the ankle bone." Foreground="#9a42ff" />
                    <TextBox x:Name="TxtAnkle" Margin="0,0,0,5" />
                </StackPanel>

                <Button Content="Next" Click="NextBodyMeasurements" Background="#9a42ff" Foreground="White" HorizontalAlignment="Right" Margin="0,10,0,0" />
            </StackPanel>

            <!-- Step 7: Goals -->
            <StackPanel x:Name="StepGoals" Visibility="Collapsed">
                <TextBlock Text="Add your goals:" FontSize="20" Margin="0,0,0,10" TextAlignment="Center" Foreground="#9a42ff"/>
                <TextBlock Text="Goal Description:" FontSize="12" Foreground="#9a42ff" Margin="0,0,0,2"/>
                <TextBox x:Name="TxtGoalDescription" Width="300" Margin="0,0,0,5"/>
                <TextBlock Text="Timeframe:" FontSize="12" Foreground="#9a42ff" Margin="0,5,0,2"/>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBox x:Name="TxtGoalTimeframeAmount" Width="60" Margin="0,0,5,0"/>
                    <ComboBox x:Name="CmbGoalTimeframeUnit" Width="140">
                        <ComboBoxItem>Day(s)</ComboBoxItem>
                        <ComboBoxItem>Week(s)</ComboBoxItem>
                        <ComboBoxItem>Month(s)</ComboBoxItem>
                        <ComboBoxItem>Year(s)</ComboBoxItem>
                    </ComboBox>
                </StackPanel>
                <Button x:Name="BtnAddGoal" Content="Add Goal" Width="100" Margin="0,10,0,0" Click="AddGoal" HorizontalAlignment="Center"/>
                <ListBox x:Name="GoalsList" Height="100" Margin="0,10,0,0" Foreground="#9a42ff"/>
                <Button Content="Edit Selected" Width="120" Margin="5,0" Click="EditGoal"/>
                <Button Content="Delete Selected" Width="120" Margin="5,0" Click="DeleteGoal"/>
                <Button Content="Next" Width="100" Margin="0,10,0,0" HorizontalAlignment="Center" Click="NextGoals"/>
            </StackPanel>

            <!-- Step 8: Before Pictures -->
            <StackPanel x:Name="StepPictures" Visibility="Collapsed" Width="700">
                <TextBlock Text="Upload your before pictures:" FontSize="20" Margin="0,0,0,10" TextAlignment="Center" Foreground="#9a42ff"/>
                <WrapPanel HorizontalAlignment="Center">
                    <GroupBox Header="Frontal" Margin="10,10" Foreground="#9a42ff">
                        <StackPanel>
                            <Border BorderBrush="#9a42ff" BorderThickness="1" Margin="0,5">
                                <Image x:Name="ImgFrontalPreview" Height="100" Width="100" Stretch="Uniform"/>
                            </Border>
                            <TextBlock x:Name="TxtFrontalFileName" FontSize="10" TextAlignment="Center" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" MaxWidth="100" Margin="0,2,0,0" Foreground="#9a42ff"/>
                            <Button Content="Upload" Click="UploadFrontal"/>
                        </StackPanel>
                    </GroupBox>
                    <GroupBox Header="Left Side" Margin="10,10" Foreground="#9a42ff">
                        <StackPanel>
                            <Border BorderBrush="#9a42ff" BorderThickness="1" Margin="0,5">
                                <Image x:Name="ImgLeftPreview" Height="100" Width="100" Stretch="Uniform"/>
                            </Border>
                            <TextBlock x:Name="TxtLeftFileName" FontSize="10" TextAlignment="Center" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" MaxWidth="100" Margin="0,2,0,0" Foreground="#9a42ff"/>
                            <Button Content="Upload" Click="UploadLeft"/>
                        </StackPanel>
                    </GroupBox>
                    <GroupBox Header="Right Side" Margin="10,10" Foreground="#9a42ff">
                        <StackPanel>
                            <Border BorderBrush="#9a42ff" BorderThickness="1" Margin="0,5">
                                <Image x:Name="ImgRightPreview" Height="100" Width="100" Stretch="Uniform"/>
                            </Border>
                            <TextBlock x:Name="TxtRightFileName" FontSize="10" TextAlignment="Center" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" MaxWidth="100" Margin="0,2,0,0" Foreground="#9a42ff"/>
                            <Button Content="Upload" Click="UploadRight"/>
                        </StackPanel>
                    </GroupBox>
                    <GroupBox Header="Back" Margin="10,10" Foreground="#9a42ff">
                        <StackPanel>
                            <Border BorderBrush="#9a42ff" BorderThickness="1" Margin="0,5">
                                <Image x:Name="ImgBackPreview" Height="100" Width="100" Stretch="Uniform"/>
                            </Border>
                            <TextBlock x:Name="TxtBackFileName" FontSize="10" TextAlignment="Center" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" MaxWidth="100" Margin="0,2,0,0" Foreground="#9a42ff"/>
                            <Button Content="Upload" Click="UploadBack"/>
                        </StackPanel>
                    </GroupBox>
                </WrapPanel>
                <Button Content="Finish" Width="100" Margin="0,10,0,0" HorizontalAlignment="Center" Click="FinishIntake"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Page>
